<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Use the title from a page's frontmatter if it has one -->
    <title>Extract `UrlHelpers`
</title>
    <link href="../../stylesheets/site.css" rel="stylesheet" />
    <link href="../../stylesheets/syntax.css" rel="stylesheet" />
    <script src="../../javascripts/site.js"></script>
  </head>
  <body class="page">
    <details id="table-of-contents" class="page__history" open>
      <summary class="page__history-summary">
        Table of Contents
      </summary>
      <nav class="history">
        <a href="../../">git-read</a>

          <a href="../2a4441cc551f2fd73f05b8d25328a6d0d0d9ed99/">Elaborate on the project&#x27;s goals in the README.md
</a>
          <a href="../1b46163dfde3fcdc734ef11daef07972c7fd4c99/">[GENERATED]: Scaffold the project with Middleman
</a>
          <a href="../f2859800cec5f90bb8146d5c7108429a22f25c18/">Replace Generated Files with Static HTML and CSS
</a>
          <a href="../49d1766f58a627a8a084f1377fc6ad17755e6ff0/">Exercise the application through a System Test
</a>
          <a href="../8160f2abba85592b84535bfa3011fa84f606f776/">Introduce Redcarpet Markdown Engine
</a>
          <a href="../4fe99ee1ce3065d8b660b3610e73b757d5b8b1fa/">Generate `&#x2F;index.html` dynamically
</a>
          <a href="../0dd760a67ec2b51117152cb31773c1d6e5f536f4/">Extract `ApplicationSystemTestCase`
</a>
          <a href="../3c9c89d56b1324dc2b25ecee7de846fce189f68a/">Render the contents of a Commit&#x27;s Message
</a>
          <a href="../619b2ca977b180e73d56092d3a85d0a8656c0b2c/">Navigate to previous commit
</a>
          <a href="../5cc450efada669809417cf49275c26d48e69f2d6/">Navigate to next commit
</a>
          <a href="../2ed248c6751b4cd8e64689c14a938bc8fd96cc16/">Dynamically determine project title
</a>
          <a href="./" aria-current="page">Extract `UrlHelpers`
</a>
          <a href="../9469b52bbdf746fdd6a8da332425202c03aa3e49/">Add &quot;current&quot; styles to `&lt;a&gt;` elements
</a>
          <a href="../e2efb6370ec88f15ebdfe63c51842850061922a1/">Syntax highlight Markdown fenced code blocks
</a>
          <a href="../1261c2cd6419892377f9e60d72db8e71aeb5b4ed/">Introduce `bin&#x2F;git-read` command line interface
</a>
          <a href="../ac78db5082fc4db071636ea202507074b2933f1e/">Add `bin&#x2F;git-read --server` flag
</a>
          <a href="../ba3e99cff05e0fcea3d61ebd523dbbe5eceb2d2a/">Extract `GitHelpers` from System Test Cases
</a>
          <a href="../8c013823c8e11292c337129342c1fe45b9940327/">Add support for re-writing a project&#x27;s history
</a>
          <a href="../ed2d78d1d5455e85fbe45aef39b6a8e5b4f79518/">Extract `Commit` model
</a>
          <a href="../e976a569f6a4c916c74d6310899cc13262f8f5c6/">Render how a commit changes the project&#x27;s files
</a>
          <a href="../2e0cc32e8828a0543de30fbf9fe7429a24945f99/">Integrate with GitHub Actions
</a>
      </nav>
    </details>

    <main class="page__content">
      <header>

        <nav class="navigation">

<a href="../2ed248c6751b4cd8e64689c14a938bc8fd96cc16/">              &#8592; Previous
</a>
<a href="../9469b52bbdf746fdd6a8da332425202c03aa3e49/">              Next &#8594;
</a>        </nav>
      </header>

      <section class="container">
        <article class="container__item commit">
          <h1>Extract <code>UrlHelpers</code></h1>

<p>This commit extracts commonly hard-coded path values into a singular
location, which is shared in the implementation and the test suite
through the newly declared <code>UrlHelpers</code> module.</p>

<p>Middleman support extending the rendering context by passing modules to
the <a href="https://middlemanapp.com/basics/helper-methods/#custom-defined-helpers"><code>helpers</code> method</a>:</p>

<blockquote>
<p>In addition to the helpers provided by Middleman out of the box, you
can also add your own helper methods and classes that will be
accessible within any controller or view automatically.</p>

<p>Alternatively, you can create external Ruby modules which contain
helpers and include them. You can put files in the <code>lib</code> directory.</p>

<p>An even easier way is to put your helpers in the <code>helpers</code> directory
and name them after their module (i.e., <code>CustomHelpers</code> lives in
<code>helpers/custom_helpers.rb</code>). Then, Middleman will automatically load
them and register them as helpers.</p>
</blockquote>

        </article>
          <aside class="container__item diff">
              <details
  id="helpers/url_helpers.rb"
  open
>
  <summary>
    helpers/url_helpers.rb
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/helpers/url_helpers.rb b/helpers/url_helpers.rb
</span><span class="p">new file mode 100644
</span><span class="gh">index 0000000..b375b35
</span><span class="gd">--- /dev/null
</span><span class="gi">+++ b/helpers/url_helpers.rb
</span><span class="p">@@ -0,0 +1,9 @@</span>
<span class="gi">+module UrlHelpers
+  def commit_path(commit)
+    "/commits/#{commit.sha}/index.html"
+  end
+
+  def root_path
+    "/index.html"
+  end
+end
</span></code></pre></div></details>

              <details
  id="source/layouts/layout.erb"
  open
>
  <summary>
    source/layouts/layout.erb
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/source/layouts/layout.erb b/source/layouts/layout.erb
index 5522690..98cd454 100644
</span><span class="gd">--- a/source/layouts/layout.erb
</span><span class="gi">+++ b/source/layouts/layout.erb
</span><span class="p">@@ -16,12 +16,12 @@</span>
         Table of Contents
       &lt;/summary&gt;
       &lt;nav class="history"&gt;
<span class="gd">-        &lt;a href="/index.html"&gt;
</span><span class="gi">+        &lt;% link_to root_path do %&gt;
</span>           &lt;%= escape_html(history[:root]) %&gt;
<span class="gd">-        &lt;/a&gt;
</span><span class="gi">+        &lt;% end %&gt;
</span> 
         &lt;% history[:commits].each do |commit| %&gt;
<span class="gd">-          &lt;% link_to "/commits/#{commit.sha}/index.html" do %&gt;
</span><span class="gi">+          &lt;% link_to commit_path(commit) do %&gt;
</span>             &lt;%= escape_html(commit.message.lines.first) %&gt;
           &lt;% end %&gt;
         &lt;% end %&gt;
<span class="p">@@ -33,13 +33,13 @@</span>
         &lt;% parent, _, child = adjacent_commits(history[:commits], commit: commit) %&gt;
 
         &lt;% if parent.present? %&gt;
<span class="gd">-          &lt;% link_to "/commits/#{parent.sha}/index.html" do %&gt;
</span><span class="gi">+          &lt;% link_to commit_path(parent) do %&gt;
</span>             &amp;#8592; Previous
           &lt;% end %&gt;
         &lt;% end %&gt;
 
         &lt;% if child.present? %&gt;
<span class="gd">-          &lt;% link_to "/commits/#{child.sha}/index.html" do %&gt;
</span><span class="gi">+          &lt;% link_to commit_path(child) do %&gt;
</span>             Next &amp;#8594;
           &lt;% end %&gt;
         &lt;% end %&gt;
</code></pre></div></details>

              <details
  id="test/application_system_test_case.rb"
  open
>
  <summary>
    test/application_system_test_case.rb
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/test/application_system_test_case.rb b/test/application_system_test_case.rb
index a61a8f8..4f164cd 100644
</span><span class="gd">--- a/test/application_system_test_case.rb
</span><span class="gi">+++ b/test/application_system_test_case.rb
</span><span class="p">@@ -10,9 +10,12 @@</span> require "tmpdir"
 
 require "middleman/rack"
 
<span class="gi">+require_relative "../helpers/url_helpers"
+
</span> class ApplicationSystemTestCase &lt; ActiveSupport::TestCase
   include Capybara::DSL
   include Capybara::Minitest::Assertions
<span class="gi">+  include UrlHelpers
</span> 
   def around(&amp;block)
     directory = Dir.mktmpdir
</code></pre></div></details>

              <details
  id="test/system/visitor_views_commits_test.rb"
  open
>
  <summary>
    test/system/visitor_views_commits_test.rb
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/test/system/visitor_views_commits_test.rb b/test/system/visitor_views_commits_test.rb
index 8e50c3c..0ed2dd0 100644
</span><span class="gd">--- a/test/system/visitor_views_commits_test.rb
</span><span class="gi">+++ b/test/system/visitor_views_commits_test.rb
</span><span class="p">@@ -12,7 +12,7 @@</span> class VisitorViewsCommitsTest &lt; ApplicationSystemTestCase
     MARKDOWN
 
     with_git_repository do
<span class="gd">-      visit "/index.html"
</span><span class="gi">+      visit root_path
</span>       click_on "The commit subject"
 
       assert_selector "h1", text: "The commit subject"
<span class="p">@@ -25,7 +25,7 @@</span> class VisitorViewsCommitsTest &lt; ApplicationSystemTestCase
     commit("This subject has a `&lt;h1&gt;` in it")
 
     with_git_repository do
<span class="gd">-      visit "/index.html"
</span><span class="gi">+      visit root_path
</span> 
       assert_text "This subject has a `&lt;h1&gt;` in it"
     end
</code></pre></div></details>

              <details
  id="test/system/visitor_views_next_commit_test.rb"
  open
>
  <summary>
    test/system/visitor_views_next_commit_test.rb
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/test/system/visitor_views_next_commit_test.rb b/test/system/visitor_views_next_commit_test.rb
index 7280e5d..146257f 100644
</span><span class="gd">--- a/test/system/visitor_views_next_commit_test.rb
</span><span class="gi">+++ b/test/system/visitor_views_next_commit_test.rb
</span><span class="p">@@ -10,7 +10,7 @@</span> class VisitorViewsNextCommitTest &lt; ApplicationSystemTestCase
     commit("Last commit")
 
     with_git_repository do
<span class="gd">-      visit "/index.html"
</span><span class="gi">+      visit root_path
</span>       click_on "First commit"
       click_on "Next"
 
<span class="p">@@ -23,7 +23,7 @@</span> class VisitorViewsNextCommitTest &lt; ApplicationSystemTestCase
     commit("First commit")
 
     with_git_repository do
<span class="gd">-      visit "/index.html"
</span><span class="gi">+      visit root_path
</span>       click_on "First commit"
 
       assert_no_link "Next"
</code></pre></div></details>

              <details
  id="test/system/visitor_views_previous_commit_test.rb"
  open
>
  <summary>
    test/system/visitor_views_previous_commit_test.rb
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/test/system/visitor_views_previous_commit_test.rb b/test/system/visitor_views_previous_commit_test.rb
index 7180de4..0d5e981 100644
</span><span class="gd">--- a/test/system/visitor_views_previous_commit_test.rb
</span><span class="gi">+++ b/test/system/visitor_views_previous_commit_test.rb
</span><span class="p">@@ -10,7 +10,7 @@</span> class VisitorViewsPreviousCommitTest &lt; ApplicationSystemTestCase
     commit("Last commit")
 
     with_git_repository do
<span class="gd">-      visit "/index.html"
</span><span class="gi">+      visit root_path
</span>       click_on "Last commit"
       click_on "Previous"
 
<span class="p">@@ -23,7 +23,7 @@</span> class VisitorViewsPreviousCommitTest &lt; ApplicationSystemTestCase
     commit("First commit")
 
     with_git_repository do
<span class="gd">-      visit "/index.html"
</span><span class="gi">+      visit root_path
</span>       click_on "First commit"
 
       assert_no_link "Previous"
</code></pre></div></details>

              <details
  id="test/system/visitor_views_readme_test.rb"
  open
>
  <summary>
    test/system/visitor_views_readme_test.rb
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/test/system/visitor_views_readme_test.rb b/test/system/visitor_views_readme_test.rb
index 0557896..1611a91 100644
</span><span class="gd">--- a/test/system/visitor_views_readme_test.rb
</span><span class="gi">+++ b/test/system/visitor_views_readme_test.rb
</span><span class="p">@@ -11,7 +11,7 @@</span> class VisitorViewsReadmeTest &lt; ApplicationSystemTestCase
     commit("Initial Commit")
 
     with_git_repository do
<span class="gd">-      visit "/index.html"
</span><span class="gi">+      visit root_path
</span> 
       assert_title "git-read"
       assert_selector "h1", text: "git-read"
<span class="p">@@ -26,7 +26,7 @@</span> class VisitorViewsReadmeTest &lt; ApplicationSystemTestCase
     commit("Last commit")
 
     with_git_repository do |directory|
<span class="gd">-      visit "/index.html"
</span><span class="gi">+      visit root_path
</span>       click_on "Last commit"
       click_on directory.basename.to_s
 
</code></pre></div></details>

          </aside>
      </section>
    </main>
  </body>
</html>
