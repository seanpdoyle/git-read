<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Use the title from a page's frontmatter if it has one -->
    <title>Render the contents of a Commit's Message
</title>
    <link href="../../stylesheets/site.css" rel="stylesheet" />
    <script src="../../javascripts/site.js"></script>
  </head>
  <body class="page">
    <header class="header">
      <h1 class="header__name">
<a href="../../">          git-read
</a>      </h1>


      <nav class="
        header__navigation
        navigation
        
      ">
<a href="../11c6c630ca60e3977a022f0b1009512b7a0f8e80/">              &#8592; Previous
</a>
<a href="../10a308f76c4914a39284b8b21b2a83cfcc32431a/">              Next &#8594;
</a>      </nav>
    </header>

    <main class="content">
      <details class="accordion content__item">
        <summary class="accordion__summary">
          <div class="accordion__closed">
            <nav class="
              commit-history
              u-db-overflow-y--auto
              u-mb-overflow-x--scroll
            ">
                <a href="../2a4441cc551f2fd73f05b8d25328a6d0d0d9ed99/" class="commit-node commit-node--collapsed" title="Elaborate on the project's goals in the README.md
"></a>
                <a href="../1b46163dfde3fcdc734ef11daef07972c7fd4c99/" class="commit-node commit-node--collapsed" title="[GENERATED]: Scaffold the project with Middleman
"></a>
                <a href="../1874624426883ffed07c46686860aeb53a3d1eee/" class="commit-node commit-node--collapsed" title="Replace Generated Files with Static HTML and CSS
"></a>
                <a href="../fbe6992e7bed119e25961f6c7f0c8c051c8f1cbe/" class="commit-node commit-node--collapsed" title="Exercise the application through a System Test
"></a>
                <a href="../8cec38432ea0f127de4d3229a475f9dbb541d613/" class="commit-node commit-node--collapsed" title="Introduce Redcarpet Markdown Engine
"></a>
                <a href="../f6656aeaaee85534e9cbe29bec7b1d57fda69af8/" class="commit-node commit-node--collapsed" title="Generate `/index.html` dynamically
"></a>
                <a href="../11c6c630ca60e3977a022f0b1009512b7a0f8e80/" class="commit-node commit-node--collapsed" title="Extract `ApplicationSystemTestCase`
"></a>
                <a href="./" class="commit-node commit-node--collapsed" title="Render the contents of a Commit's Message
" aria-current="page"></a>
                <a href="../10a308f76c4914a39284b8b21b2a83cfcc32431a/" class="commit-node commit-node--collapsed" title="Navigate to previous commit
"></a>
                <a href="../ad86bb3ef42db28e3e425e650ff5e3579d98e088/" class="commit-node commit-node--collapsed" title="Navigate to next commit
"></a>
                <a href="../a85d19480552b8ded546e4f99228ea5f95d3ddd8/" class="commit-node commit-node--collapsed" title="Dynamically determine project title
"></a>
                <a href="../15131b02c6807fc8b18a5809679443fcb4b7c37f/" class="commit-node commit-node--collapsed" title="Extract `UrlHelpers`
"></a>
                <a href="../1c0dfb0535399cf1b8775a997d41c4d104db3887/" class="commit-node commit-node--collapsed" title="Add &quot;current&quot; styles to `&lt;a&gt;` elements
"></a>
                <a href="../bcbe51be2fe7c9e79df007c2de056c4caa515f65/" class="commit-node commit-node--collapsed" title="Syntax highlight Markdown fenced code blocks
"></a>
                <a href="../54dda3db29b3cea6d0534fe7d959c4b61617eb5d/" class="commit-node commit-node--collapsed" title="Introduce `bin/git-read` command line interface
"></a>
                <a href="../5811e0f19e12228cad2bba4380258622fd4fbf25/" class="commit-node commit-node--collapsed" title="Add `bin/git-read --server` flag
"></a>
                <a href="../cd81aed41b5b4d59686a14498b8eecfd37153501/" class="commit-node commit-node--collapsed" title="Extract `GitHelpers` from System Test Cases
"></a>
                <a href="../af221228154bfd13a2717d46b4e1122341eeb35a/" class="commit-node commit-node--collapsed" title="Add support for re-writing a project's history
"></a>
                <a href="../04c22d596f43d70e2504411248f5df2e32094565/" class="commit-node commit-node--collapsed" title="Extract `Commit` model
"></a>
                <a href="../43eadb1730cd6e04dcae6b5692beb16d5646442d/" class="commit-node commit-node--collapsed" title="Render how a commit changes the project's files
"></a>
                <a href="../fee3a0361c52dad96892c18e1ed41ef094402223/" class="commit-node commit-node--collapsed" title="Integrate with GitHub Actions
"></a>
                <a href="../bd75f56d8d425745a6e42e1896329bc58398362b/" class="commit-node commit-node--collapsed" title="Render history of tag, commits to home link"></a>
                <a href="../ae8349901ed8e19d6ae97c8bc6a83040965941ea/" class="commit-node commit-node--collapsed" title="BUGFIX: Render &quot;Next&quot; from root"></a>
                <a href="../b863390d4a64dce4f8f76a767dab0fd49f0a2424/" class="commit-node commit-node--collapsed" title="Add webpack for building JavaScript
"></a>
                <a href="../c74387a20086b786c775cedac1ae0ae95b88930c/" class="commit-node commit-node--collapsed" title="polyfill details element"></a>
                <a href="../48671e7b23b8cabb958bd7e4573035e28131337b/" class="commit-node commit-node--collapsed" title="scrollIntoView to current
"></a>
                <a href="../873948be03f67149b653298c54bb2a9058f47a6c/" class="commit-node commit-node--collapsed" title="add turbolinks for faster navigation
"></a>
            </nav>

            <div class="accordion__toggle">
              <span class="accordion--desktop">
                <svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <title>Expand History</title>
                  <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L10.293 8 4.646 2.354a.5.5 0 010-.708z" clip-rule="evenodd"/>
                </svg>
              </span>

              <span class="accordion--mobile">
                <svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <title>Expand History</title>
                  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 01.708 0L8 10.293l5.646-5.647a.5.5 0 01.708.708l-6 6a.5.5 0 01-.708 0l-6-6a.5.5 0 010-.708z" clip-rule="evenodd"/>
                </svg>
              </span>
            </div>
          </div>

          <div class="accordion__opened">
            <div class="accordion__toggle accordion__toggle--fill">
              <span class="accordion--desktop">
                <svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <title>Collapse History</title>
                  <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 010 .708L5.707 8l5.647 5.646a.5.5 0 01-.708.708l-6-6a.5.5 0 010-.708l6-6a.5.5 0 01.708 0z" clip-rule="evenodd"/>
                </svg>
              </span>

              <span class="accordion--mobile">
                <svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <title>Collapse History</title>
                  <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 01.708 0l6 6a.5.5 0 01-.708.708L8 5.707l-5.646 5.647a.5.5 0 01-.708-.708l6-6z" clip-rule="evenodd"/>
                </svg>
              </span>
            </div>
          </div>
        </summary>

        <nav class="
          commit-history
          commit-history--full
          u-db-overflow-y--auto
          u-mb-overflow-x--scroll
        ">
<a href="../2a4441cc551f2fd73f05b8d25328a6d0d0d9ed99/" class="commit-node commit-node--full">              <p>Elaborate on the project&#39;s goals in the README.md</p>

</a><a href="../1b46163dfde3fcdc734ef11daef07972c7fd4c99/" class="commit-node commit-node--full">              <p>[GENERATED]: Scaffold the project with Middleman</p>

</a><a href="../1874624426883ffed07c46686860aeb53a3d1eee/" class="commit-node commit-node--full">              <p>Replace Generated Files with Static HTML and CSS</p>

</a><a href="../fbe6992e7bed119e25961f6c7f0c8c051c8f1cbe/" class="commit-node commit-node--full">              <p>Exercise the application through a System Test</p>

</a><a href="../8cec38432ea0f127de4d3229a475f9dbb541d613/" class="commit-node commit-node--full">              <p>Introduce Redcarpet Markdown Engine</p>

</a><a href="../f6656aeaaee85534e9cbe29bec7b1d57fda69af8/" class="commit-node commit-node--full">              <p>Generate <code>/index.html</code> dynamically</p>

</a><a href="../11c6c630ca60e3977a022f0b1009512b7a0f8e80/" class="commit-node commit-node--full">              <p>Extract <code>ApplicationSystemTestCase</code></p>

</a><a href="./" class="commit-node commit-node--full" aria-current="page">              <p>Render the contents of a Commit&#39;s Message</p>

</a><a href="../10a308f76c4914a39284b8b21b2a83cfcc32431a/" class="commit-node commit-node--full">              <p>Navigate to previous commit</p>

</a><a href="../ad86bb3ef42db28e3e425e650ff5e3579d98e088/" class="commit-node commit-node--full">              <p>Navigate to next commit</p>

</a><a href="../a85d19480552b8ded546e4f99228ea5f95d3ddd8/" class="commit-node commit-node--full">              <p>Dynamically determine project title</p>

</a><a href="../15131b02c6807fc8b18a5809679443fcb4b7c37f/" class="commit-node commit-node--full">              <p>Extract <code>UrlHelpers</code></p>

</a><a href="../1c0dfb0535399cf1b8775a997d41c4d104db3887/" class="commit-node commit-node--full">              <p>Add &quot;current&quot; styles to <code>&lt;a&gt;</code> elements</p>

</a><a href="../bcbe51be2fe7c9e79df007c2de056c4caa515f65/" class="commit-node commit-node--full">              <p>Syntax highlight Markdown fenced code blocks</p>

</a><a href="../54dda3db29b3cea6d0534fe7d959c4b61617eb5d/" class="commit-node commit-node--full">              <p>Introduce <code>bin/git-read</code> command line interface</p>

</a><a href="../5811e0f19e12228cad2bba4380258622fd4fbf25/" class="commit-node commit-node--full">              <p>Add <code>bin/git-read --server</code> flag</p>

</a><a href="../cd81aed41b5b4d59686a14498b8eecfd37153501/" class="commit-node commit-node--full">              <p>Extract <code>GitHelpers</code> from System Test Cases</p>

</a><a href="../af221228154bfd13a2717d46b4e1122341eeb35a/" class="commit-node commit-node--full">              <p>Add support for re-writing a project&#39;s history</p>

</a><a href="../04c22d596f43d70e2504411248f5df2e32094565/" class="commit-node commit-node--full">              <p>Extract <code>Commit</code> model</p>

</a><a href="../43eadb1730cd6e04dcae6b5692beb16d5646442d/" class="commit-node commit-node--full">              <p>Render how a commit changes the project&#39;s files</p>

</a><a href="../fee3a0361c52dad96892c18e1ed41ef094402223/" class="commit-node commit-node--full">              <p>Integrate with GitHub Actions</p>

</a><a href="../bd75f56d8d425745a6e42e1896329bc58398362b/" class="commit-node commit-node--full">              <p>Render history of tag, commits to home link</p>

</a><a href="../ae8349901ed8e19d6ae97c8bc6a83040965941ea/" class="commit-node commit-node--full">              <p>BUGFIX: Render &quot;Next&quot; from root</p>

</a><a href="../b863390d4a64dce4f8f76a767dab0fd49f0a2424/" class="commit-node commit-node--full">              <p>Add webpack for building JavaScript</p>

</a><a href="../c74387a20086b786c775cedac1ae0ae95b88930c/" class="commit-node commit-node--full">              <p>polyfill details element</p>

</a><a href="../48671e7b23b8cabb958bd7e4573035e28131337b/" class="commit-node commit-node--full">              <p>scrollIntoView to current</p>

</a><a href="../873948be03f67149b653298c54bb2a9058f47a6c/" class="commit-node commit-node--full">              <p>add turbolinks for faster navigation</p>

</a>        </nav>
      </details>

      <article class="
        commit-content
        commit-content--double
        content__item
        content__item--grow
      ">
        <section class="commit commit--message">

          <h1 id="render-the-contents-of-a-commits-message">Render the contents of a Commit&rsquo;s Message</h1>

<p>A Git commit message follows a <a href="https://commit.style/">loose structure</a>:</p>

<blockquote>
<p>The first line of a commit message serves as a summary.  When
displayed on the web, it&rsquo;s often styled as a heading, and in emails,
it&rsquo;s typically used as the subject.  As such, you should capitalize
it and omit any trailing punctuation.  Aim for about 50 characters,
give or take, otherwise it may be painfully truncated in some
contexts.</p>

<p>Oftentimes a subject by itself is sufficient.  When it&rsquo;s not, add a
blank line (this is important) followed by one or more paragraphs hard
wrapped to 72 characters.</p>
</blockquote>

<p>Assuming that the commits adhere to that convention, the application
will split out the commit&rsquo;s subject line from the rest of the message,
and treat it as the resulting HTML page&rsquo;s title.</p>

<p>The call to <code>subject.strip</code> in the <code>source/commits/commit</code> template is
deliberate and important. Without it, a trailing new-line character
would separate the title from its underlining <code>===</code> syntax, which would
signal to the Markdown generator that it was to be represented as a
<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/p"><code>&lt;p&gt;</code> element`</a> instead of an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements"><code>&lt;h1&gt;</code> element</a>.</p>

<h2 id="navigating-the-history">Navigating the history</h2>

<p>Both the <code>/index.html</code> and specific <code>/commits/$SHA/index.html</code> pages
render the project&rsquo;s history in a navigable sidebar. To power this
feature, and to ensure that the data is shared across <a href="https://middlemanapp.com/advanced/dynamic-pages#defining-proxies">Middleman&rsquo;s proxy
templates</a>, extract a <a href="#config.rb"><code>config.rb</code></a>-local variable,
which is declared and shared by <a href="https://ruby-doc.org/core-2.7.0/Hash.html#method-i-merge">merging in additional template local
variables</a> as the <a href="https://middlemanapp.com/basics/partials/"><code>local:</code> key</a>.</p>

<p>The history is meant to be read start-to-finish (as opposed to the
typical latest-to-first output that a default <a href="https://www.git-scm.com/docs/git-log"><code>git log</code></a> call
provides).</p>

<p>To achieve this order, chain a call to
<a href="https://ruby-doc.org/core-2.7.0/Enumerable.html#method-i-reverse_each"><code>Enumerable#reverse_each</code></a> onto calls to
<code>repository.log</code>. The <code>#log</code> method receives a limit on the number of
commits to provide. We want the full history, so we pass <code>nil</code>.</p>

<p>There are times when a commit&rsquo;s subject line contains Markdown that we
<em>do not</em> want to inline as raw HTML. To support this, wrap the
navigation item&rsquo;s text in calls to the new <code>#markdown</code> helper declared
within [<code>config.rb</code>][#config.rb]. This helper utilizes the underlying
<a href="https://middlemanapp.com/basics/templating-language/">Markdown engine that Middleman has registered</a> with
<a href="https://github.com/rtomayko/tilt/tree/v2.0.10#template-mappings"><code>Tilt</code></a>.</p>

        </section>

          <aside class="commit commit--diff commit--long-content">
              <details
  id="config.rb"
  open
  class="file"
>
  <summary class="file__name">
    <span class="file__toggle file__toggle--close">
      <svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <title>Expand config.rb</title>
        <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 01.708 0l6 6a.5.5 0 01-.708.708L8 5.707l-5.646 5.647a.5.5 0 01-.708-.708l6-6z" clip-rule="evenodd"/>
      </svg>
    </span>

    <span class="file__toggle file__toggle--open">
      <svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <title>Expand config.rb</title>
        <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 01.708 0L8 10.293l5.646-5.647a.5.5 0 01.708.708l-6 6a.5.5 0 01-.708 0l-6-6a.5.5 0 010-.708z" clip-rule="evenodd"/>
      </svg>
    </span>

    <code>
      config.rb
    </code>
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/config.rb b/config.rb
index f261291..ee25085 100644
</span><span class="gd">--- a/config.rb
</span><span class="gi">+++ b/config.rb
</span><span class="p">@@ -34,20 +34,40 @@</span> repository = Git.open(
   Pathname(ENV.fetch("GIT_DIR", File.dirname(__FILE__))),
 )
 
<span class="gi">+locals = {
+  history: {
+    commits: repository.log(nil).reverse_each,
+  },
+}
+
</span> latest_readme = repository.show("HEAD:README.md")
 proxy(
   "index.html",
   "README.html",
<span class="gd">-  locals: {
</span><span class="gi">+  locals: locals.merge(
</span>     commit: repository.object("HEAD"),
     contents: latest_readme,
     page: {
       title: latest_readme.lines.first,
     },
<span class="gd">-  },
</span><span class="gi">+  ),
</span>   ignore: true,
 )
 
<span class="gi">+locals.dig(:history, :commits).each do |commit|
+  proxy(
+    "/commits/#{commit.sha}/index.html",
+    "/commits/commit.html",
+    locals: locals.merge(
+      commit: commit,
+      page: {
+        title: commit.message.lines.first,
+      }
+    ),
+    ignore: true,
+  )
+end
+
</span> # Helpers
 # Methods defined in the helpers block are available in templates
 # https://middlemanapp.com/basics/helper-methods/
<span class="p">@@ -58,6 +78,14 @@</span> proxy(
 #   end
 # end
 
<span class="gi">+helpers do
+  def markdown(content)
+    template = Tilt[:md].new { content }
+
+    template.render
+  end
+end
+
</span> # Build-specific configuration
 # https://middlemanapp.com/advanced/configuration/#environment-specific-settings
 
</code></pre></div></details>

              <details
  id="source/commits/commit.html.md.erb"
  open
  class="file"
>
  <summary class="file__name">
    <span class="file__toggle file__toggle--close">
      <svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <title>Expand source/commits/commit.html.md.erb</title>
        <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 01.708 0l6 6a.5.5 0 01-.708.708L8 5.707l-5.646 5.647a.5.5 0 01-.708-.708l6-6z" clip-rule="evenodd"/>
      </svg>
    </span>

    <span class="file__toggle file__toggle--open">
      <svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <title>Expand source/commits/commit.html.md.erb</title>
        <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 01.708 0L8 10.293l5.646-5.647a.5.5 0 01.708.708l-6 6a.5.5 0 01-.708 0l-6-6a.5.5 0 010-.708z" clip-rule="evenodd"/>
      </svg>
    </span>

    <code>
      source/commits/commit.html.md.erb
    </code>
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/source/commits/commit.html.md.erb b/source/commits/commit.html.md.erb
</span><span class="p">new file mode 100644
</span><span class="gh">index 0000000..b05055b
</span><span class="gd">--- /dev/null
</span><span class="gi">+++ b/source/commits/commit.html.md.erb
</span><span class="p">@@ -0,0 +1,6 @@</span>
<span class="gi">+&lt;% subject, *messages = commit.message.lines %&gt;
+
+&lt;%= subject.strip %&gt;
+===
+
+&lt;%= messages.join %&gt;
</span></code></pre></div></details>

              <details
  id="source/layouts/layout.erb"
  open
  class="file"
>
  <summary class="file__name">
    <span class="file__toggle file__toggle--close">
      <svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <title>Expand source/layouts/layout.erb</title>
        <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 01.708 0l6 6a.5.5 0 01-.708.708L8 5.707l-5.646 5.647a.5.5 0 01-.708-.708l6-6z" clip-rule="evenodd"/>
      </svg>
    </span>

    <span class="file__toggle file__toggle--open">
      <svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <title>Expand source/layouts/layout.erb</title>
        <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 01.708 0L8 10.293l5.646-5.647a.5.5 0 01.708.708l-6 6a.5.5 0 01-.708 0l-6-6a.5.5 0 010-.708z" clip-rule="evenodd"/>
      </svg>
    </span>

    <code>
      source/layouts/layout.erb
    </code>
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/source/layouts/layout.erb b/source/layouts/layout.erb
index ad34538..edafa73 100644
</span><span class="gd">--- a/source/layouts/layout.erb
</span><span class="gi">+++ b/source/layouts/layout.erb
</span><span class="p">@@ -40,11 +40,14 @@</span>
               u-db-overflow-y--auto
               u-mb-overflow-x--scroll
             "&gt;
<span class="gd">-              &lt;a href="#" class="commit-node commit-node--collapsed" title="[GENERATED]: Scaffold the project with Middleman"&gt;
-              &lt;/a&gt;
-
-              &lt;a href="#" class="commit-node commit-node--collapsed" title="Elaborate on the project's goals in the README.md"&gt;
-              &lt;/a&gt;
</span><span class="gi">+              &lt;% history[:commits].each do |commit| %&gt;
+                &lt;%= link_to(
+                  "",
+                  "/commits/#{commit.sha}/index.html",
+                  class: "commit-node commit-node--collapsed",
+                  title: commit.message.lines.first
+                ) %&gt;
+              &lt;% end %&gt;
</span>             &lt;/nav&gt;
 
             &lt;div class="accordion__toggle"&gt;
<span class="p">@@ -89,13 +92,14 @@</span>
           u-db-overflow-y--auto
           u-mb-overflow-x--scroll
         "&gt;
<span class="gd">-          &lt;a href="#" class="commit-node commit-node--full"&gt;
-            [GENERATED]: Scaffold the project with Middleman
-          &lt;/a&gt;
-
-          &lt;a href="#" class="commit-node commit-node--full"&gt;
-            Elaborate on the project's goals in the README.md
-          &lt;/a&gt;
</span><span class="gi">+          &lt;% history[:commits].each do |commit| %&gt;
+            &lt;% link_to(
+              "/commits/#{commit.sha}/index.html",
+              class: "commit-node commit-node--full",
+            ) do %&gt;
+              &lt;%= markdown(commit.message.lines.first) %&gt;
+            &lt;% end %&gt;
+          &lt;% end %&gt;
</span>         &lt;/nav&gt;
       &lt;/details&gt;
 
</code></pre></div></details>

              <details
  id="test/system/visitor_views_commits_test.rb"
  open
  class="file"
>
  <summary class="file__name">
    <span class="file__toggle file__toggle--close">
      <svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <title>Expand test/system/visitor_views_commits_test.rb</title>
        <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 01.708 0l6 6a.5.5 0 01-.708.708L8 5.707l-5.646 5.647a.5.5 0 01-.708-.708l6-6z" clip-rule="evenodd"/>
      </svg>
    </span>

    <span class="file__toggle file__toggle--open">
      <svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <title>Expand test/system/visitor_views_commits_test.rb</title>
        <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 01.708 0L8 10.293l5.646-5.647a.5.5 0 01.708.708l-6 6a.5.5 0 01-.708 0l-6-6a.5.5 0 010-.708z" clip-rule="evenodd"/>
      </svg>
    </span>

    <code>
      test/system/visitor_views_commits_test.rb
    </code>
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/test/system/visitor_views_commits_test.rb b/test/system/visitor_views_commits_test.rb
</span><span class="p">new file mode 100644
</span><span class="gh">index 0000000..942b0c2
</span><span class="gd">--- /dev/null
</span><span class="gi">+++ b/test/system/visitor_views_commits_test.rb
</span><span class="p">@@ -0,0 +1,33 @@</span>
<span class="gi">+require "application_system_test_case"
+
+class VisitorViewsCommitsTest &lt; ApplicationSystemTestCase
+  test "visitor views commits" do
+    stage_file("README.md", "Ignore me")
+    commit("Ignore me")
+    stage_file("file.txt", "Ignore me")
+    commit(&lt;&lt;~MARKDOWN)
+    The commit subject
+
+    The commit body
+    MARKDOWN
+
+    with_git_repository do
+      visit "/index.html"
+      click_on "The commit subject"
+
+      assert_selector "h1", text: "The commit subject"
+      assert_selector "p", text: "The commit body"
+    end
+  end
+
+  test "visitor views commit with HTML in the subject line" do
+    stage_file("README.md", "Ignore me")
+    commit("This subject has a `&lt;h1&gt;` in it")
+
+    with_git_repository do
+      visit "/index.html"
+
+      assert_text "This subject has a &lt;h1&gt; in it"
+    end
+  end
+end
</span></code></pre></div></details>

          </aside>
      </article>
    </main>
  </body>
</html>
